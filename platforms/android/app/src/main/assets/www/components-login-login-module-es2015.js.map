{"version":3,"sources":["./src/app/components/login/login.page.html","./src/app/components/login/login.module.ts","./src/app/components/login/login.page.scss","./src/app/components/login/login.page.ts","./src/app/services/login-service.service.ts"],"names":[],"mappings":"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","file":"components-login-login-module-es2015.js","sourcesContent":["module.exports = \"<ion-header>\\n  <ion-toolbar>\\n    <ion-title>Login</ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content class=\\\"form-content\\\">\\n    <ion-content class=\\\"form-content\\\">\\n        <form class=\\\"form-wrapper\\\" [formGroup]=\\\"loginForm\\\" (ngSubmit)=\\\"onLogin()\\\">\\n          <!-- logo-image -->\\n          <img src=\\\"assets/icon/logo.png\\\" class=\\\"logo-img\\\">\\n      \\n          <ion-item>\\n            <ion-input type=\\\"email\\\" formControlName=\\\"email\\\" placeholder=\\\"Email\\\" required></ion-input>\\n            <ion-icon item-left name=\\\"mail\\\"></ion-icon>\\n          </ion-item>\\n      \\n          <ion-item>\\n            <ion-input type=\\\"password\\\" formControlName=\\\"password\\\" placeholder=\\\"Password\\\" required show-hide-input></ion-input>\\n            <ion-icon item-left name=\\\"lock\\\"></ion-icon>\\n          </ion-item>\\n      \\n          <button ion-button block class=\\\"submit-btn\\\" type=\\\"submit\\\" [disabled]=\\\"!loginForm.valid\\\">Log in\\n          </button>\\n        </form>\\n      \\n        <ion-row class=\\\"alt-options\\\">\\n          <ion-col no-padding col-6>\\n            <button ion-button block clear (click)=\\\"goToForgotPassword()\\\">Forgot Password?</button>\\n          </ion-col>\\n          <ion-col no-padding col-6 text-right>\\n            <button ion-button block clear (click)=\\\"goToSignup()\\\">Sign up!</button>\\n          </ion-col>\\n        </ion-row>\\n    \\n\\n</ion-content>\"","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule,ReactiveFormsModule } from '@angular/forms';\nimport { Routes, RouterModule } from '@angular/router';\nimport {HttpClientModule} from '@angular/common/http'\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { LoginPage } from './login.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: LoginPage\n  }\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    ReactiveFormsModule,\n    HttpClientModule,\n    RouterModule.forChild(routes)\n  ],\n  declarations: [LoginPage]\n})\nexport class LoginPageModule {}\n","module.exports = \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2NvbXBvbmVudHMvbG9naW4vbG9naW4ucGFnZS5zY3NzIn0= */\"","import { Component, OnInit } from '@angular/core';\nimport {LoginServiceService} from '../../services/login-service.service';\nimport {NavController} from '@ionic/angular';\nimport {FormGroup,FormBuilder,Validators} from '@angular/forms';\n\n@Component({\n  selector: 'app-login',\n  templateUrl: './login.page.html',\n  styleUrls: ['./login.page.scss'],\n})\nexport class LoginPage implements OnInit {\n  public loginForm: FormGroup;\n  constructor(private service : LoginServiceService, private navctrl : NavController ,\n              private fb : FormBuilder) { }\n\n  ngOnInit() {\n    this.loginForm = this.fb.group({\n      email: ['socialapp@test.com', Validators.required],\n      password: ['123456', [Validators.required, Validators.minLength(6)]]\n    });\n  }\n\n  onLogin(){\n    let email = this.loginForm.controls['email'].value\n    let password = this.loginForm.controls['password'].value\n    this.service.login(email,password)\n  }\n\n  goToSignup() {\n    this.navctrl.navigateForward(\"signup\");\n  }\n  goToForgotPassword() {\n    this.navctrl.navigateForward(\"ForgetPasswordPage\");\n  }\n\n  ionViewWillEnter(){\nlet tabs = document.querySelectorAll('.tabber');\nif(tabs != null){\n  Object.keys(tabs).map((key)=>{\n    tabs[key].style.transform = 'translateY(56px)'\n  })\n}\nif(localStorage.getItem('uid') != null){\n  this.navctrl.navigateRoot('TabsPage')\n}\n  }\n\n  \n}\n","import { Injectable } from '@angular/core';\nimport {LoadingController, NavController, ToastController } from '@ionic/angular';\nimport {AngularFireAuth} from 'angularfire2/auth';\nimport {AngularFirestore} from 'angularfire2/firestore';\nimport {Storage} from '@ionic/storage';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class LoginServiceService {\n\n  constructor(private afAuth : AngularFireAuth,private navCtrl :NavController,private toastCtrl : ToastController,\n              private afire : AngularFirestore, private lodingCtrl : LoadingController, private storage : Storage) \n              { }\n\n             async login(email, password) {\n                let loader = await this.lodingCtrl.create({\n                    message: 'Logging in...'\n                });\n                loader.present();\n                this.storage.get('ids').then(ids => {\n                    let oneSignalIds = (ids == null) ? { userId: 'noId', pushToken: 'noId' } : ids;\n                    this.afAuth.auth.signInWithEmailAndPassword(email, password)\n                        .then(res => {\n                            console.log(res);\n                            localStorage.setItem('uid', res.user.uid);\n                            this.afire.collection('users').doc(res.user.uid).update({\n                                lastLoginAt: Date.now(),\n                                playerId: oneSignalIds.userId,\n                                pushToken: oneSignalIds.pushToken\n                            }).then(res => {\n                                this.showToast('Login Successful!');\n                                this.navCtrl.navigateRoot([\"TabsPage\", { tabsHideOnSubPages: true }]);\n                                loader.dismiss();\n                            }).catch(error => {\n                                this.showToast(error.message);\n                                loader.dismiss();\n                            });\n                        }).catch(error => {\n                            this.showToast(error.message);\n                            loader.dismiss();\n                        });\n                });\n            }\n        \n            async showToast(message) {\n                let toast = await this.toastCtrl.create({\n                    message: message,\n                    duration: 4000,\n                    position: 'bottom'\n                });\n                toast.present();\n            }\n}\n"],"sourceRoot":""}