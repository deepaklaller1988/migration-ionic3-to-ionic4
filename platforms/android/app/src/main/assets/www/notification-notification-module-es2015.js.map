{"version":3,"sources":["./src/app/components/notification/notification.page.html","./src/app/components/notification/notification.module.ts","./src/app/components/notification/notification.page.scss","./src/app/components/notification/notification.page.ts","./src/app/services/home.service.ts","./src/app/services/notification.service.ts"],"names":[],"mappings":";;;;;;;;;AAAA,81BAA81B,4EAA4E,8DAA8D,mBAAmB,QAAQ,oBAAoB,MAAM,mDAAmD,qCAAqC,kN;;;;;;;;;;;;;;;;;;;;;;;ACA5kC;AACM;AACF;AACU;AACb;AACG;AAEU;AAEvD,MAAM,MAAM,GAAW;IACrB;QACE,IAAI,EAAE,EAAE;QACR,SAAS,EAAE,mEAAgB;KAC5B;CACF,CAAC;AAYF,IAAa,sBAAsB,GAAnC,MAAa,sBAAsB;CAAG;AAAzB,sBAAsB;IAVlC,8DAAQ,CAAC;QACR,OAAO,EAAE;YACP,4DAAY;YACZ,0DAAW;YACX,0DAAW;YACX,uDAAY;YACZ,4DAAY,CAAC,QAAQ,CAAC,MAAM,CAAC;SAC9B;QACD,YAAY,EAAE,CAAC,mEAAgB,CAAC;KACjC,CAAC;GACW,sBAAsB,CAAG;AAAH;;;;;;;;;;;;AC1BnC,+DAA+D,uK;;;;;;;;;;;;;;;;;;;;;ACAb;AACwC;AAChB;AAChB;AAEvB;AAOnC,IAAa,gBAAgB,GAA7B,MAAa,gBAAgB;IAE3B,YAAoB,OAAsB,EAChC,mBAAwC,EACxC,WAA8B,EAC9B,WAAwB,EACxB,SAA0B;QAJhB,YAAO,GAAP,OAAO,CAAe;QAChC,wBAAmB,GAAnB,mBAAmB,CAAqB;QACxC,gBAAW,GAAX,WAAW,CAAmB;QAC9B,gBAAW,GAAX,WAAW,CAAa;QACxB,cAAS,GAAT,SAAS,CAAiB;QAChC,IAAI,CAAC,aAAa,EAAE,CAAC;IACzB,CAAC;IAED,QAAQ;IACR,CAAC;IAKK,aAAa;;YACjB,IAAI,CAAC,GAAG,GAAG,YAAY,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC;YACvC,IAAI,MAAM,GAAG,MAAM,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC;gBACzC,OAAO,EAAE,0BAA0B;aACpC,CAAC,CAAC;YACH,MAAM,CAAC,OAAO,EAAE,CAAC,IAAI,CAAC,GAAG,EAAE;gBACzB,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,mBAAmB,CAAC,gBAAgB,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,YAAY,EAAE,CAAC,IAAI,CAAC,0DAAG,CAAE,KAAK,CAAC,EAAE;oBACxG,OAAO,KAAK,CAAC,GAAG,CAAC,CAAC,IAAS,EAAE,EAAE;wBAC7B,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,mBAAmB,CAAC,QAAQ,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,YAAY,EAAE,CAAC;wBAC3E,yBAAY,IAAI,EAAG;oBACrB,CAAC,CAAC,CAAC;gBACL,CAAC,CAAC,CAAC,CAAC;YACN,CAAC,CAAC,CAAC,IAAI,CAAC,GAAG,EAAE;gBACX,MAAM,CAAC,OAAO,EAAE,CAAC;YACnB,CAAC,CAAC;QACJ,CAAC;KAAA;IAEK,eAAe,CAAC,YAAY;;YAChC,IAAI,MAAM,GAAG,MAAM,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC;gBACzC,OAAO,EAAE,gBAAgB;aAC1B,CAAC,CAAC;YACH,MAAM,CAAC,OAAO,EAAE,CAAC;YACjB,IAAI,CAAC,mBAAmB,CAAC,aAAa,CAAC,YAAY,CAAC,MAAM,CAAC,CAAC,YAAY,EAAE,CAAC,IAAI,CAAC,0DAAG,CAAC,CAAC,IAAS,EAAE,EAAE;gBAChG,IAAI,IAAI,EAAE;oBACR,IAAI,IAAI,GAAG,IAAI,CAAC;oBAChB,IAAI,MAAM,GAAG,YAAY,CAAC,MAAM,CAAC;oBACjC,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,WAAW,CAAC,YAAY,CAAC,MAAM,EAAE,IAAI,CAAC,GAAG,CAAC,CAAC,YAAY,EAAE,CAAC;oBAC5E,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,WAAW,CAAC,WAAW,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,YAAY,EAAE,CAAC;oBACzE,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,WAAW,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC,YAAY,EAAE,CAAC;oBAChE,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,WAAW,CAAC,WAAW,CAAC,MAAM,CAAC,CAAC,YAAY,EAAE,CAAC;oBACvE,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,WAAW,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC,YAAY,EAAE,CAAC;oBAClE,IAAI,IAAI,CAAC,YAAY,EAAE;wBACrB,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,WAAW,CAAC,WAAW,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,YAAY,EAAE,CAAC;qBAClF;oBACD,uBAAS,MAAM,IAAK,IAAI,EAAG;iBAC5B;qBAAM;oBACL,IAAI,CAAC,mBAAmB,CAAC,UAAU,CAAC,YAAY,CAAC,MAAM,EAAE,IAAI,CAAC,GAAG,EAAE,YAAY,CAAC,GAAG,CAAC,CAAC;oBACrF,IAAI,CAAC,SAAS,CAAC,kBAAkB,CAAC,CAAC;iBACpC;YACH,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,GAAG,EAAE,EAAE;gBACpB,IAAI,GAAG,EAAE;oBACP,IAAI,CAAC,mBAAmB,CAAC,UAAU,CAAC,GAAG,CAAC,MAAM,EAAE,IAAI,CAAC,GAAG,EAAE,YAAY,CAAC,GAAG,CAAC,CAAC;oBAC5E,MAAM,CAAC,OAAO,EAAE,CAAC;oBACjB,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC,CAAC,MAAM,EAAE,EAAE,IAAI,EAAE,GAAG,EAAE,CAAC,CAAC,CAAC;iBACpD;qBAAM;oBACL,MAAM,CAAC,OAAO,EAAE,CAAC;iBAClB;YACH,CAAC,CAAC,CAAC;QACL,CAAC;KAAA;IAEK,aAAa;;YACjB,IAAI,MAAM,GAAG,MAAM,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC;gBACzC,OAAO,EAAE,wBAAwB;aAClC,CAAC,CAAC;YACH,MAAM,CAAC,OAAO,EAAE,CAAC,IAAI,CAAC,GAAG,EAAE;gBACzB,IAAI,CAAC,mBAAmB,CAAC,gBAAgB,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,YAAY,EAAE,CAAC,IAAI,CAAC,0DAAG,CAAC,KAAK,CAAC,EAAE;oBAClF,OAAO,KAAK,CAAC,GAAG,CAAC,CAAC,IAAS,EAAE,EAAE;wBAC7B,IAAI,CAAC,mBAAmB,CAAC,aAAa,CAAC,IAAI,EAAE,IAAI,CAAC,GAAG,CAAC,CAAC,IAAI,EAAE,CAAC;oBAChE,CAAC,CAAC,CAAC;gBACL,CAAC,CAAC,CAAC,CAAC,SAAS,EAAE,CAAC;YAClB,CAAC,CAAC,CAAC,IAAI,CAAC,GAAG,EAAE;gBACX,MAAM,CAAC,OAAO,EAAE,CAAC;YACnB,CAAC,CAAC,CAAC;QACL,CAAC;KAAA;IAED,YAAY,CAAC,IAAK,EAAE,MAAO;QACzB,IAAI,IAAI,EAAE;YACR,IAAI,CAAC,QAAQ,GAAG,MAAM,CAAC,QAAQ,CAAC;YAChC,IAAI,CAAC,UAAU,GAAG,MAAM,CAAC,UAAU,CAAC;YACpC,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC,CAAC,UAAU,EAAE,EAAE,IAAI,EAAE,IAAI,EAAE,CAAC,CAAC,CAAC;SACzD;aAAM;YACL,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC,UAAU,CAAC,CAAC;SACvC;IACH,CAAC;IAEK,SAAS,CAAC,OAAO;;YACrB,IAAI,KAAK,GAAG,MAAM,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC;gBACtC,OAAO,EAAE,OAAO;gBAChB,QAAQ,EAAE,IAAI;gBACd,QAAQ,EAAE,QAAQ;aACnB,CAAC,CAAC;YACH,KAAK,CAAC,OAAO,EAAE,CAAC;QAClB,CAAC;KAAA;CAEF;;YAlG8B,4DAAa;YACX,kFAAmB;YAC3B,gEAAiB;YACjB,kEAAW;YACb,8DAAe;;AANzB,gBAAgB;IAL5B,+DAAS,CAAC;QACT,QAAQ,EAAE,kBAAkB;QAC5B,uKAAuC;;KAExC,CAAC;2EAG6B,4DAAa;QACX,kFAAmB;QAC3B,gEAAiB;QACjB,kEAAW;QACb,8DAAe;GANzB,gBAAgB,CAoG5B;AApG4B;;;;;;;;;;;;;;;;;;;;;;ACZc;AACO;AACoC;AACP;AAI/E,IAAa,WAAW,GAAxB,MAAa,WAAW;IAOtB,YAAoB,SAA2B,EACnC,eAAwC,EACxC,IAAgB;QAFR,cAAS,GAAT,SAAS,CAAkB;QACnC,oBAAe,GAAf,eAAe,CAAyB;QACxC,SAAI,GAAJ,IAAI,CAAY;QARpB,UAAK,GAAW,sCAAsC,CAAC;QAIvD,YAAO,GAAW,oFAAoF,CAAC;QAK3G,IAAI,CAAC,KAAK,GAAG,SAAS,CAAC,UAAU,CAAC,OAAO,CAAC,CAAC;QAC3C,IAAI,CAAC,KAAK,GAAG,SAAS,CAAC,UAAU,CAAC,OAAO,CAAC,CAAC;QAC3C,IAAI,CAAC,KAAK,GAAG,SAAS,CAAC,UAAU,CAAC,OAAO,CAAC,CAAC;IAC/C,CAAC;IAED,WAAW,CAAC,GAAG;QACX,OAAO,CAAC,GAAG,CAAC,WAAW,EAAC,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC;QAC7C,OAAO,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;IAC/B,CAAC;IAED,QAAQ,CAAC,GAAG;QACR,OAAO,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,OAAO,GAAG,GAAG,CAAC,CAAC;IAC7C,CAAC;IAED,YAAY,CAAC,MAAM,EAAE,GAAG;QACpB,OAAO,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC,UAAU,CAAC,SAAS,EAAE,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,KAAK,CAAC,SAAS,EAAE,IAAI,EAAE,GAAG,CAAC,CAAC,CAAC;IAChG,CAAC;IAED,QAAQ,CAAC,MAAM;QACX,OAAO,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC,UAAU,CAAC,SAAS,CAAC,CAAC;IACxD,CAAC;IAED,WAAW,CAAC,MAAM;QACd,OAAO,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC,UAAU,CAAC,aAAa,CAAC,CAAC;IAC5D,CAAC;IAED,SAAS,CAAC,MAAM;QACZ,OAAO,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC,UAAU,CAAC,UAAU,CAAC,CAAC;IACzD,CAAC;IAED,UAAU,CAAC,MAAM,EAAE,MAAM;QACrB,OAAO,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC,UAAU,CAAC,SAAS,CAAC,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC,MAAM,EAAE,CAAC;IAC7E,CAAC;IAED,QAAQ,CAAC,QAAQ,EAAE,QAAQ,EAAE,MAAM,EAAE,GAAG,EAAE,IAAI;QAC1C,OAAO,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC,UAAU,CAAC,SAAS,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC,GAAG,CAAC;YAC9D,SAAS,EAAE,IAAI,CAAC,GAAG,EAAE;YACrB,IAAI,EAAE,MAAM;YACZ,OAAO,EAAE,IAAI;SAChB,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE;YACV,IAAI,CAAC,IAAI,IAAI,GAAG,CAAC,EAAE;gBACf,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,UAAU,CAAC,eAAe,CAAC,CAAC,GAAG,CAAC,MAAM,GAAG,GAAG,GAAG,IAAI,CAAC,CAAC,GAAG,CAAC;oBACzE,SAAS,EAAE,IAAI,CAAC,GAAG,EAAE;oBACrB,KAAK,EAAE,OAAO;oBACd,GAAG,EAAE,IAAI;oBACT,MAAM,EAAE,MAAM;oBACd,IAAI,EAAE,KAAK;iBACd,CAAC,CAAC,IAAI,CAAC,GAAG,EAAE;oBACT,IAAI,QAAQ,IAAI,MAAM,EAAE;wBACpB,IAAI,OAAO,GAAG;4BACV,MAAM,EAAE,IAAI,CAAC,KAAK;4BAClB,QAAQ,EAAE,EAAE,IAAI,EAAE,QAAQ,GAAG,kBAAkB,EAAE;4BACjD,kBAAkB,EAAE,CAAC,QAAQ,CAAC;yBACjC;wBACD,IAAI,CAAC,eAAe,CAAC,gBAAgB,CAAC,OAAO,CAAC,CAAC,SAAS,CAAC,GAAG,CAAC,EAAE,GAAG,CAAC,CAAC,CAAC;qBACxE;gBACL,CAAC,CAAC,CAAC;aACN;QACL,CAAC,CAAC,CAAC;IACP,CAAC;IAED,eAAe,CAAC,GAAG;QACf,OAAO,IAAI,CAAC,SAAS,CAAC,UAAU,CAAC,OAAO,EAAE,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,KAAK,CAAC,GAAG,EAAE,IAAI,EAAE,GAAG,CAAC,CAAC,CAAC;IAChF,CAAC;IAED,qBAAqB,CAAC,MAAM,EAAE,GAAG;QAC7B,OAAO,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC,UAAU,CAAC,UAAU,EAAE,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,KAAK,CAAC,QAAQ,EAAE,IAAI,EAAE,IAAI,CAAC,CAAC,KAAK,CAAC,KAAK,EAAE,IAAI,EAAE,GAAG,CAAC,CAAC,CAAC;IACzH,CAAC;IAED,oBAAoB,CAAC,GAAG;QACpB,OAAO,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,UAAU,CAAC,eAAe,CAAC,CAAC;IAC3D,CAAC;CACF;;YA3EgC,uEAAgB;YAClB,0FAAuB;YAClC,+DAAU;;AATjB,WAAW;IAHvB,gEAAU,CAAC;QACV,UAAU,EAAE,MAAM;KACnB,CAAC;2EAQ+B,uEAAgB;QAClB,0FAAuB;QAClC,+DAAU;GATjB,WAAW,CAkFvB;AAlFuB;;;;;;;;;;;;;;;;;;;;ACPmB;AAC2C;AAItF,IAAa,mBAAmB,GAAhC,MAAa,mBAAmB;IAI5B,YAAY,SAA2B;QACnC,IAAI,CAAC,KAAK,GAAG,SAAS,CAAC,UAAU,CAAC,OAAO,CAAC,CAAC;QAC3C,IAAI,CAAC,KAAK,GAAG,SAAS,CAAC,UAAU,CAAC,OAAO,CAAC,CAAC;IAC/C,CAAC;IAED,gBAAgB,CAAC,GAAG;QAChB,OAAO,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,UAAU,CAAC,eAAe,EAAE,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,OAAO,CAAC,WAAW,EAAE,MAAM,CAAC,CAAC,CAAC;IACpG,CAAC;IAED,QAAQ,CAAC,GAAG;QACR,OAAO,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;IAC/B,CAAC;IAED,aAAa,CAAC,MAAM;QAChB,OAAO,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;IAClC,CAAC;IAED,UAAU,CAAC,MAAM,EAAE,IAAI,EAAE,IAAI;QACzB,OAAO,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC,UAAU,CAAC,eAAe,CAAC,CAAC,GAAG,CAAC,MAAM,GAAG,GAAG,GAAG,IAAI,CAAC,CAAC,MAAM,EAAE,CAAC;IAC9F,CAAC;IAED,aAAa,CAAC,IAAI,EAAE,GAAG;QACnB,OAAO,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,UAAU,CAAC,eAAe,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,MAAM,GAAG,GAAG,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,MAAM,EAAE,CAAC;IACtG,CAAC;CACJ;;YAxB0B,uEAAgB;;AAJ9B,mBAAmB;IAH/B,gEAAU,CAAC;QACV,UAAU,EAAE,MAAM;KACnB,CAAC;2EAKyB,uEAAgB;GAJ9B,mBAAmB,CA4B/B;AA5B+B","file":"notification-notification-module-es2015.js","sourcesContent":["module.exports = \"<ion-header>\\n    <ion-toolbar color=\\\"primary\\\">\\n      <ion-title class=\\\"ion-text-center\\\" >Notifications</ion-title>\\n      <ion-buttons slot=\\\"end\\\">\\n          <ion-button (click)=\\\"markAllAsRead()\\\">\\n            <ion-icon slot=\\\"icon-only\\\" name=\\\"close\\\"></ion-icon>\\n          </ion-button>\\n      </ion-buttons>\\n    </ion-toolbar>\\n  </ion-header>\\n  <ion-content class=\\\"notifications-content\\\">\\n    <div *ngIf=\\\"notifications | async as notifications\\\">\\n      <ion-item *ngIf=\\\"notifications?.length==0\\\">\\n        <p>No unread notifications.!</p>\\n      </ion-item>\\n    </div>\\n    <span *ngFor=\\\"let notification of notifications | async\\\">\\n      <ion-item *ngIf=\\\"notification?.userInfo | async as userInfo\\\" class=\\\"item\\\" (click)=\\\"goToCommentPage(notification)\\\">\\n        <ion-avatar item-left>\\n          <img src=\\\"{{userInfo?.profilePicThumb ? userInfo.profilePicThumb : userInfo.profilePic}}\\\" class=\\\"img-avatar\\\">\\n        </ion-avatar>\\n        <p>{{userInfo.username}}&nbsp;{{notification.event}}&nbsp;your post.</p>\\n        <ion-note class=\\\"time\\\">{{notification.createdAt | amTimeAgo }}</ion-note>\\n      </ion-item>\\n    </span>\\n  </ion-content>\\n  <ion-fab bottom right (click)=\\\"goToPostPage()\\\">\\n    <button ion-fab>\\n      <ion-icon name=\\\"add\\\"></ion-icon>\\n    </button>\\n  </ion-fab>\\n\"","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Routes, RouterModule } from '@angular/router';\nimport { MomentModule } from 'ngx-moment';\nimport { IonicModule } from '@ionic/angular';\n\nimport { NotificationPage } from './notification.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: NotificationPage\n  }\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    MomentModule,\n    RouterModule.forChild(routes)\n  ],\n  declarations: [NotificationPage]\n})\nexport class NotificationPageModule {}\n","module.exports = \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2NvbXBvbmVudHMvbm90aWZpY2F0aW9uL25vdGlmaWNhdGlvbi5wYWdlLnNjc3MifQ== */\"","import { Component, OnInit } from '@angular/core';\nimport {NavController, LoadingController, ToastController, Events } from '@ionic/angular';\nimport { NotificationService } from '../../services/notification.service';\nimport { HomeService } from '../../services/home.service';\nimport { Observable } from 'rxjs';\nimport {map} from 'rxjs/operators';\nimport {  } from 'rxjs/add/operator/take';\n@Component({\n  selector: 'app-notification',\n  templateUrl: './notification.page.html',\n  styleUrls: ['./notification.page.scss'],\n})\nexport class NotificationPage implements OnInit {\n\n  constructor( public navCtrl: NavController,\n    private notificationService: NotificationService,\n    private loadingCtrl: LoadingController,\n    private homeService: HomeService,\n    private toastCtrl: ToastController) {\n      this.constructorfn();\n  }\n\n  ngOnInit() {\n  }\n\n  private uid: string;\n  public notifications;\n\n  async constructorfn() {\n    this.uid = localStorage.getItem('uid');\n    let loader = await this.loadingCtrl.create({\n      message: 'Getting Notifications...'\n    });\n    loader.present().then(() => {\n      this.notifications = this.notificationService.getNotifications(this.uid).valueChanges().pipe(map( items => {\n        return items.map((item: any) => {\n          item.userInfo = this.notificationService.userInfo(item.uid).valueChanges();\n          return { ...item };\n        });\n      }));\n    }).then(() => {\n      loader.dismiss();\n    })\n  }\n\n  async goToCommentPage(notification) {\n    let loader = await this.loadingCtrl.create({\n      message: 'Please wait...'\n    });\n    loader.present();\n    this.notificationService.getSinglePost(notification.postId).valueChanges().pipe(map((item: any) => {\n      if (item) {\n        let data = item;\n        let postId = notification.postId;\n        data.liked = this.homeService.checkIsLiked(postId, this.uid).valueChanges();\n        data.postOf = this.homeService.getUserInfo(data.postedBy).valueChanges();\n        data.likedBy = this.homeService.getLikes(postId).valueChanges();\n        data.commentedBy = this.homeService.getComments(postId).valueChanges();\n        data.sharedBy = this.homeService.getShares(postId).valueChanges();\n        if (data.isSharedPost) {\n          data.whosePostInfo = this.homeService.getUserInfo(data.whosePost).valueChanges();\n        }\n        return { postId, ...data };\n      } else {\n        this.notificationService.markAsRead(notification.postId, this.uid, notification.uid);\n        this.showToast('Post was removed');\n      }\n    })).subscribe((res) => {\n      if (res) {\n        this.notificationService.markAsRead(res.postId, this.uid, notification.uid);\n        loader.dismiss();\n        this.navCtrl.navigateRoot([\"home\", { post: res }]);\n      } else {\n        loader.dismiss();\n      }\n    });\n  }\n\n  async markAllAsRead() {\n    let loader = await this.loadingCtrl.create({\n      message: 'Marking all as read...'\n    });\n    loader.present().then(() => {\n      this.notificationService.getNotifications(this.uid).valueChanges().pipe(map(items => {\n        return items.map((item: any) => {\n          this.notificationService.markAllAsRead(item, this.uid).then();\n        });\n      })).subscribe();\n    }).then(() => {\n      loader.dismiss();\n    });\n  }\n\n  goToPostPage(post?, postOf?) {\n    if (post) {\n      post.playerId = postOf.playerId;\n      post.profilePic = postOf.profilePic;\n      this.navCtrl.navigateRoot([\"PostPage\", { post: post }]);\n    } else {\n      this.navCtrl.navigateRoot(\"PostPage\");\n    }\n  }\n\n  async showToast(message) {\n    let toast = await this.toastCtrl.create({\n      message: message,\n      duration: 4000,\n      position: 'bottom'\n    });\n    toast.present();\n  }\n\n}\n","import { Injectable } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\nimport { AngularFirestore, AngularFirestoreCollection } from 'angularfire2/firestore';\nimport { PushNotificationService } from '../services/pushnotification.servics';\n@Injectable({\n  providedIn: 'root'\n})\nexport class HomeService {\n  private appId: string = \"e194af8d-50b1-4150-958d-afb0df854256\";\n  private users: AngularFirestoreCollection<{}>;\n  private posts: AngularFirestoreCollection<{}>;\n  private chats: AngularFirestoreCollection<{}>;\n  private baseUrl: string = 'https://us-central1-firestrore-ionic-social-app.cloudfunctions.net/followingPosts/';\n\n  constructor(private afService: AngularFirestore,\n      private pushNotiService: PushNotificationService,\n      private http: HttpClient) {\n      this.users = afService.collection('users');\n      this.posts = afService.collection('posts');\n      this.chats = afService.collection('chats');\n  }\n\n  getUserInfo(uid) {\n      console.log(\">>>>>>>>>\",this.users.doc(uid));\n      return this.users.doc(uid);\n  }\n\n  getPosts(uid) { // this API hit will give loggedin plus followed users post only\n      return this.http.get(this.baseUrl + uid);\n  }\n\n  checkIsLiked(postId, uid) {\n      return this.posts.doc(postId).collection('likedBy', ref => ref.where('likedBy', '==', uid));\n  }\n\n  getLikes(postId) {\n      return this.posts.doc(postId).collection('likedBy');\n  }\n\n  getComments(postId) {\n      return this.posts.doc(postId).collection('commentedBy');\n  }\n\n  getShares(postId) {\n      return this.posts.doc(postId).collection('sharedBy');\n  }\n\n  unlikePost(postId, likeId) {\n      return this.posts.doc(postId).collection('likedBy').doc(likeId).delete();\n  }\n\n  likePost(username, playerId, postId, uid, luid) {\n      return this.posts.doc(postId).collection('likedBy').doc(luid).set({\n          createdAt: Date.now(),\n          type: 'like',\n          likedBy: luid\n      }).then(res => {\n          if ((luid != uid)) {\n              this.users.doc(uid).collection('notifications').doc(postId + '-' + luid).set({\n                  createdAt: Date.now(),\n                  event: 'liked',\n                  uid: luid,\n                  postId: postId,\n                  read: false\n              }).then(() => {\n                  if (playerId != 'noId') {\n                      let message = {\n                          app_id: this.appId,\n                          contents: { \"en\": username + ' liked your post' },\n                          include_player_ids: [playerId]\n                      }\n                      this.pushNotiService.sendNotification(message).subscribe(res => { });\n                  }\n              });\n          }\n      });\n  }\n\n  getMessageCount(uid) {\n      return this.afService.collection('chats', ref => ref.where(uid, '==', uid));\n  }\n\n  getUnreadMessageCount(chatId, uid) {\n      return this.chats.doc(chatId).collection('messages', ref => ref.where('unread', '==', true).where('uid', '==', uid));\n  }\n\n  getNotificationCount(uid) {\n      return this.users.doc(uid).collection('notifications');\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { AngularFirestore, AngularFirestoreCollection } from 'angularfire2/firestore';\n@Injectable({\n  providedIn: 'root'\n})\nexport class NotificationService {\n    private users: AngularFirestoreCollection<{}>;\n    private posts: AngularFirestoreCollection<{}>;\n\n    constructor(afService: AngularFirestore) {\n        this.users = afService.collection('users');\n        this.posts = afService.collection('posts');\n    }\n\n    getNotifications(uid) {\n        return this.users.doc(uid).collection('notifications', ref => ref.orderBy('createdAt', 'desc'));\n    }\n\n    userInfo(uid) {\n        return this.users.doc(uid);\n    }\n\n    getSinglePost(postId) {\n        return this.posts.doc(postId);\n    }\n\n    markAsRead(postId, luid, ouid) {\n        return this.users.doc(luid).collection('notifications').doc(postId + '-' + ouid).delete();\n    }\n\n    markAllAsRead(item, uid) {\n        return this.users.doc(uid).collection('notifications').doc(item.postId + '-' + item.uid).delete();\n    }\n}\n"],"sourceRoot":""}