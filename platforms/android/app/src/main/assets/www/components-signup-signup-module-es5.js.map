{"version":3,"sources":["./src/app/components/signup/signup.page.html","./src/app/components/signup/signup.module.ts","./src/app/components/signup/signup.page.scss","./src/app/components/signup/signup.page.ts","./src/app/services/sign-up.service.ts"],"names":[],"mappings":"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","file":"components-signup-signup-module-es5.js","sourcesContent":["module.exports = \"<ion-content class=\\\"form-content\\\">\\n  <form class=\\\"form-wrapper\\\" [formGroup]=\\\"signupForm\\\" (ngSubmit)=\\\"onRegister()\\\">\\n    <!-- logo-image -->\\n    <img src=\\\"assets/icon/logo.png\\\" class=\\\"logo-img\\\">\\n\\n     <ion-item>\\n      <ion-input type=\\\"text\\\" placeholder=\\\"Username\\\" formControlName=\\\"username\\\" ></ion-input>\\n      <ion-icon item-left name=\\\"contact\\\"></ion-icon>\\n    </ion-item>\\n    \\n    <ion-item>\\n      <ion-input type=\\\"email\\\" placeholder=\\\"Email\\\" formControlName=\\\"email\\\"></ion-input>\\n      <ion-icon item-left name=\\\"mail\\\"></ion-icon>\\n    </ion-item>\\n\\n    <ion-item>\\n       <ion-input type=\\\"password\\\" placeholder=\\\"Password\\\" formControlName=\\\"password\\\"></ion-input>\\n       <ion-icon item-left name=\\\"lock\\\"></ion-icon>\\n    </ion-item>\\n\\n    <ion-item>\\n       <ion-input type=\\\"password\\\" placeholder=\\\"confirm password\\\" formControlName=\\\"confirmPassword\\\"></ion-input>\\n       <ion-icon item-left name=\\\"lock\\\"></ion-icon>\\n    </ion-item>\\n\\n\\n    <button ion-button block class=\\\"submit-btn\\\" type=\\\"submit\\\" [disabled]=\\\"!signupForm.valid\\\">Sign up</button>\\n  </form>\\n  <br>\\n  <ion-row class=\\\"divider\\\">\\n    <ion-col><hr></ion-col>\\n    <ion-col col-8>Already Have an Acount?</ion-col>\\n    <ion-col><hr></ion-col>\\n  </ion-row>\\n  <div class=\\\"goto-btn-wrapper\\\">\\n  \\t<button ion-button block class=\\\"goto-btn\\\" (click)=\\\"goToLogin()\\\" type=\\\"submit\\\" >Goto Login</button>\\n  </div>\\n\\n</ion-content>\\n\"","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule,ReactiveFormsModule } from '@angular/forms';\nimport { Routes, RouterModule } from '@angular/router';\nimport {HttpClientModule} from '@angular/common/http'\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { SignupPage } from './signup.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: SignupPage\n  }\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    ReactiveFormsModule,\n    HttpClientModule,\n    IonicModule,\n    RouterModule.forChild(routes)\n  ],\n  declarations: [SignupPage]\n})\nexport class SignupPageModule {}\n","module.exports = \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2NvbXBvbmVudHMvc2lnbnVwL3NpZ251cC5wYWdlLnNjc3MifQ== */\"","import { Component, OnInit } from '@angular/core';\nimport {NavController} from '@ionic/angular';\nimport {FormGroup,FormBuilder,Validators,FormControl} from '@angular/forms';\nimport {SignUpService} from '../../services/sign-up.service'\n@Component({\n  selector: 'app-signup',\n  templateUrl: './signup.page.html',\n  styleUrls: ['./signup.page.scss'],\n})\nexport class SignupPage implements OnInit {\n  public signupForm: FormGroup;\n  constructor(private navctrl : NavController ,private formBuilder : FormBuilder,private signUpService: SignUpService) {\n    this.signupForm = this.formBuilder.group({\n      username: ['', Validators.required],\n      email: ['', Validators.required],\n      password: ['', [Validators.required, Validators.minLength(6)]],\n      confirmPassword: ['', Validators.required]\n    });\n  }\n  ngOnInit() {\n    \n  }\n\n  onRegister() {\n    let username = this.signupForm.controls['username'].value;\n    let password = this.signupForm.controls['password'].value;\n    let confirmPassword = this.signupForm.controls['confirmPassword'].value;\n    let email = this.signupForm.controls['email'].value;\n    this.signUpService.registerUser(username, email, password, confirmPassword);\n  }\n\n  goToLogin() {\n    this.navctrl.navigateRoot([\"LoginPage\", { tabsHideOnSubPages: true }]);\n  }\n\n  ionViewWillEnter() { //required to hide tabs on this\n    let tabs = document.querySelectorAll('.tabbar');\n    if (tabs !== null) {\n      Object.keys(tabs).map((key) => {\n        tabs[key].style.transform = 'translateY(56px)';\n      });\n    }\n  }\n\n  ionViewDidLeave() { //required to show tabs on home page\n    let tabs = document.querySelectorAll('.tabbar');\n    if (tabs !== null) {\n      Object.keys(tabs).map((key) => {\n        tabs[key].style.transform = 'translateY(0)';\n      });\n    }\n  }\n\n}\n","import { Injectable } from '@angular/core';\nimport {LoadingController, NavController, ToastController } from '@ionic/angular';\nimport {AngularFireAuth} from 'angularfire2/auth';\nimport {AngularFirestore} from 'angularfire2/firestore';\nimport {Storage} from '@ionic/storage';\n@Injectable({\n  providedIn: 'root'\n})\nexport class SignUpService {\n\n    //Any image url this will be set as a default profile pic until user do not set anyone\n    private profilePic: string = 'https://firebasestorage.googleapis.com/v0/b/firestrore-ionic-social-app.appspot.com/o/profilePic.png?alt=media&token=1ec76018-b4a5-4eb9-b5cd-a3bf8d8a0b7e';\n\n    constructor(private afAuth : AngularFireAuth,private navCtrl :NavController,private toastCtrl : ToastController,\n      private afire : AngularFirestore, private lodingCtrl : LoadingController, private storage : Storage) \n      { }\n\n      async registerUser(username, email, password, confirmPassword) {\n      let loader = await this.lodingCtrl.create({\n        message: 'Logging in...'\n      });\n        loader.present();\n        if (password == confirmPassword) {\n            this.storage.get('ids').then(ids => {\n                let oneSignalIds = (ids == null) ? { userId: 'noId', pushToken: 'noId' } : ids;\n                this.afAuth.auth.createUserWithEmailAndPassword(email, password)\n                    .then((res: any) => {\n                        //res.uid replace res.user.uid\n                        localStorage.setItem('uid', res.user.uid);\n                        this.afire.collection('users').doc(res.user.uid).set({\n                            createdAt: Date.now(),\n                            lastLoginAt: Date.now(),\n                            username: username.charAt(0).toUpperCase() + username.slice(1),\n                            playerId: oneSignalIds.userId,\n                            pushToken: oneSignalIds.pushToken,\n                            email: email,\n                            uid: res.user.uid,\n                            profilePic: this.profilePic,\n                            coverPic: null,\n                            canDoMessage: false,  // default false so everybody can't do message\n                        }).then(() => {\n                            this.afire.collection('users').doc(res.user.uid).collection('profile').doc('detailedInfo').set({\n                                username: username.charAt(0).toUpperCase() + username.slice(1),\n                                email: email,\n                                mobileNumber: res.user.phoneNumber,\n                                phoneNumber: '',\n                                about: '',\n                                birthDate: '',\n                                gender: '',\n                                education: {\n                                    qualification: '',\n                                    University: '',\n                                    profile: '',\n                                    company: '',\n                                },\n                                currentAddress: {\n                                    street: '',\n                                    city: '',\n                                    pincode: '',\n                                    country: ''\n                                },\n                                permanentAddress: {\n                                    street: '',\n                                    city: '',\n                                    pincode: '',\n                                    country: ''\n                                }\n                            }).then();\n                            this.showToast('Sign up Successful!');\n                            this.navCtrl.navigateRoot([\"TabsPage\", { tabsHideOnSubPages: true }]);\n                            loader.dismiss();\n                        }).catch(error => {\n                            this.showToast(error.message);\n                            loader.dismiss();\n                        });\n                    }).catch(error => {\n                        this.showToast(error.message);\n                        loader.dismiss();\n                    });\n            }).catch(error => {\n                this.showToast(error.message);\n                loader.dismiss();\n            });\n        } else {\n            this.showToast('Confirm Password Doesn\\'t match, Try again');\n            loader.dismiss();\n        }\n    }\n\n    async showToast(message) {\n        let toast = await this.toastCtrl.create({\n            message: message,\n            duration: 4000,\n            position: 'bottom'\n        });\n        toast.present();\n    }\n}\n"],"sourceRoot":""}